# Chrome插件测试指南

## 测试步骤

### 1. 加载插件
1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择当前项目文件夹

### 2. 测试基本功能

#### 2.1 测试Popup
1. 点击浏览器工具栏中的插件图标
2. 应该看到popup界面，包含：
   - "打开侧边栏"按钮
   - "设置"按钮
   - 连接状态显示

#### 2.2 测试侧边栏
1. 点击popup中的"打开侧边栏"按钮
2. 侧边栏应该在右侧打开
3. 检查侧边栏界面是否正常显示

#### 2.3 测试设置面板
1. 在侧边栏中点击设置按钮（⚙️图标）
2. 设置面板应该从右侧滑入
3. 检查设置面板中的各个输入框和按钮

### 3. 调试设置面板问题

如果设置面板无法显示，请按以下步骤调试：

#### 3.1 使用调试页面
1. 在浏览器中打开 `debug-sidebar.html`
2. 点击"显示设置"按钮测试设置面板
3. 查看浏览器控制台的输出信息

#### 3.2 检查控制台错误
1. 在侧边栏页面按F12打开开发者工具
2. 查看Console标签页中的错误信息
3. 查看Elements标签页检查DOM结构

#### 3.3 手动测试CSS
在控制台中执行以下代码：
```javascript
// 检查设置面板元素
const panel = document.getElementById('settingsPanel');
console.log('设置面板元素:', panel);
console.log('当前类名:', panel.className);
console.log('计算样式:', window.getComputedStyle(panel));

// 手动显示设置面板
panel.classList.remove('hidden');
panel.style.transform = 'translateX(0)';
panel.style.display = 'block';
```

### 4. 常见问题排查

#### 4.1 设置面板不显示
- 检查CSS文件是否正确加载
- 检查JavaScript是否有语法错误
- 检查DOM元素是否存在

#### 4.2 按钮点击无响应
- 检查事件监听器是否正确绑定
- 检查控制台是否有JavaScript错误
- 检查元素ID是否匹配

#### 4.3 样式显示异常
- 检查CSS文件路径是否正确
- 检查CSS选择器是否匹配
- 检查是否有样式冲突

### 5. 修复建议

基于代码分析，主要问题可能在于：

1. **CSS transition干扰**: 设置面板的transform transition可能干扰JavaScript的样式设置
2. **时序问题**: DOM元素可能在JavaScript执行时还未完全加载
3. **事件绑定问题**: 事件监听器可能没有正确绑定到元素上

已经在代码中添加了以下修复：
- 强制重绘机制
- 更明确的样式设置
- 增强的CSS规则优先级
- 更详细的调试日志

### 6. 测试MCP功能

1. 启动MCP桥接服务器（如果需要）
2. 在设置中配置MCP服务器
3. 测试MCP工具的连接和调用

## 预期结果

- Popup界面正常显示
- 侧边栏能够正常打开
- 设置面板能够正常显示和隐藏
- 各种设置选项能够正常保存和加载
- MCP功能能够正常工作（如果配置了相关服务）